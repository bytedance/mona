var pageNodesMap = {};

function processTask(task, pageId) {
  var root = pageNodesMap[pageId];
  if (task.type === 'splice') {
    var oldNode = findNode(root, task.path, 0);
    oldNode.children = task.node.children;
    // 寻找节点
  }
}

function findNode(root, path, currentIdx) {
    var tKey = path[currentIdx];

  if (root.key === tKey) {
    if (path.length === currentIdx + 1) {
      return root;
    }
    var targetNode;
    var children = root.children
    if(children){
      for(var idx = 0; idx < children.length; idx++){
        if (!targetNode) {
          targetNode = findNode(children[idx], path, currentIdx + 1);
        } else {
          break;
        }
      }
    }
    return targetNode;
  } else {
    return;
  }
}

function parseNodes(tasks, pageId) {
  return {data: JSON.stringify(tasks ,null,2)};
}

module.exports = {
  parseNodes: parseNodes,
};
